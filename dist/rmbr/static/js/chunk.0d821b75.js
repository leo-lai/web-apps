webpackJsonp([8],{590:function(e,t,i){var l=i(91)(i(662),i(718),null,null);e.exports=l.exports},662:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"materiel",data:function(){return{list:{filter:{tel:"",numnber:"",related:""},rules:{tel:[],numnber:[],related:[]},loading:!1,page:1,row:100,total:0,data:[]}}},methods:{sizeChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.getList(1,e)},pageChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.getList(e)},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments[1];this.list.loading=!0,this.$$api.device.getRemindList(this.list.filter,t,i).then(function(t){var i=t.data;e.list.total=i.count,e.list.page=Number(i.page_number)+1,e.list.row=Number(i.per_page),e.list.data=i.list.map(function(e){return e.address=(e.province||"")+(e.city||"")+(e.district||"")+(e.detail_address||""),e.doing=!1,e})}).finally(function(t){e.list.loading=!1})},refreshList:function(){this.getList(this.list.page)},search:function(){this.getList()},clear:function(){this.$refs.listFilter&&this.$refs.listFilter.resetFields(),this.getList()},supply:function(e){var t=this;e.doing=!0,this.$$api.device.supply(e.number).then(function(e){t.$message.success("补货成功"),t.refreshList()}).finally(function(t){e.doing=!1})}},mounted:function(){this.getList()}}},718:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"l-main-body"},[i("el-row",[i("el-col",{staticClass:"l-text-right",attrs:{span:24}},[i("el-form",{ref:"listFilter",attrs:{inline:"",model:e.list.filter,rules:e.list.rules},nativeOn:{submit:function(e){e.preventDefault()}}},[i("el-form-item",{attrs:{prop:"number",lalel:""}},[i("el-input",{attrs:{placeholder:"设备编号"},model:{value:e.list.filter.number,callback:function(t){e.$set(e.list.filter,"number",t)},expression:"list.filter.number"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),i("el-button",{on:{click:e.clear}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.list.loading,expression:"list.loading"}],staticClass:"l-table-hdbg",attrs:{stripe:"","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中",data:e.list.data}},[i("el-table-column",{attrs:{label:"商家",prop:"store_name"}}),e._v(" "),i("el-table-column",{attrs:{label:"手机",prop:"tel"}}),e._v(" "),i("el-table-column",{attrs:{label:"地址",prop:"address","min-width":"200"}}),e._v(" "),i("el-table-column",{attrs:{label:"设备编号",prop:"number"}}),e._v(" "),i("el-table-column",{attrs:{label:"剩余次数",prop:"remain_count",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{directives:[{name:"show",rawName:"v-show",value:t.row.doing,expression:"scope.row.doing"}],staticClass:"l-text-warn"},[i("i",{staticClass:"el-icon-loading"}),e._v(" 操作中")]),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.doing,expression:"!scope.row.doing"}]},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){e.supply(t.row)}}},[e._v("确认补货")])],1)]}}])})],1),e._v(" "),i("el-row",{staticClass:"l-text-center l-margin-t"},[i("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":e.$$api.pageSizes,"page-size":e.list.row,"current-page":e.list.page,total:e.list.total},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1)],1)},staticRenderFns:[]}}});